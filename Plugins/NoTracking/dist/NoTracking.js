function a(t){window.enmity.plugins.registerPlugin(t)}window.enmity.modules.common.Constants,window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets;const r=window.enmity.modules.common.Messages;window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native,window.enmity.modules.common.React,window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts,window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users,window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking,window.enmity.modules.common.StyleSheet,window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function y(t){return window.enmity.patcher.create(t)}var p="NoTracking",g="1.1.3",f="Remove tracking parameters from links you send",h=[{name:"iCraze",id:"883412614699446283"}],v={name:p,version:g,description:f,authors:h};const w=y("no-tracking");function c(t){let i={},d=t.replace(/.*?\?/,"").split("&");for(let s in d){let m=d[s].split("=")[0];!m.length||(typeof i[m]=="undefined"&&(i[m]=[]),i[m].push(d[s].split("=")[1]))}return i}const _={...v,onStart(){w.before(r,"sendMessage",(t,i,d)=>{var s;let m=i[1].content;const u=/(http|https):\/\/([\w_-]+(?:(?:\.[\w_-]+)+))([\w.,@?^=%&:\/~+#-]*[\w@?^=%&\/~+#-])/g;(s=m.match(u))==null||s.forEach(e=>{let o;if(e.match(/http(s)?:\/\/(www\.)?(twitter\.com|x\.com)\//gi))o=e.split("t=")[0].split("s=")[0];else if(e.includes("reddit.com/"))o=e.replace(/utm_medium(=[^&]*)?|^utm_medium(=[^&]*)?&?/g,""),o=o.replace(/utm_source(=[^&]*)?|^utm_source(=[^&]*)?&?/g,""),o=o.replace(/utm_name(=[^&]*)?|^utm_name(=[^&]*)?&?/g,""),o=o.replace("&&",""),o=o.replace("?&","?"),o.endsWith("&")&&(o=o.slice(0,-1));else if(e.includes("ebay.co")){o=e.split("?")[0];let n=c(e);n._nkw&&(o+="?_nkw="+n._nkw)}else if(e.includes("soundcloud.com/"))o=e.split("?")[0];else if(e.includes("instagram.com/"))o=e.split("?")[0];else if(e.includes("youtube.com/")){o=e.split("?")[0];let n=c(e);n.si&&delete n.si,o+="?";for(let l in n)o+=l+"="+n[l]+"&"}else if(e.includes("youtu.be/")){o=e.split("?")[0];let n=c(e);n.si&&delete n.si,o+="?";for(let l in n)o+=l+"="+n[l]+"&"}o&&(o.endsWith("?")&&(o=o.slice(0,-1)),m=m.replace(e,o))}),i[1].content=m})},onStop(){w.unpatchAll()}};a(_);
